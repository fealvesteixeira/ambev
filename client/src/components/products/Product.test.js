import React from 'react';
import Adapter from 'enzyme-adapter-react-16';
import { mount, configure } from 'enzyme';

import Product from './Product';
configure({adapter: new Adapter()});

describe('Product', () => {

    test('Verifica se ao acessar o component é montado os cards de produto', () => {
        const products = JSON.parse('[{"id":"8868","title":"Skol 269ml - Unidade","rgb":false,"images":[{"url":"https://courier-images-codechallenge.s3-us-west-2.amazonaws.com/product/8868_205f958d-2e51-48a3-b4d5-a2998765571a.jpg"}],"productVariants":[{"availableDate":"2018-10-31T00:00:00","productVariantId":"8502","price":2.09,"inventoryItemId":"80149","shortDescription":null,"title":"Skol 269ml - Unidade","published":null,"volume":"0,00269","volumeUnit":null,"description":null,"subtitle":"Cervejas","components":[]}]},{"id":"8868","title":"Skol 269ml - Unidade","rgb":false,"images":[{"url":"https://courier-images-codechallenge.s3-us-west-2.amazonaws.com/product/8868_205f958d-2e51-48a3-b4d5-a2998765571a.jpg"}],"productVariants":[{"availableDate":"2018-10-31T00:00:00","productVariantId":"8502","price":2.09,"inventoryItemId":"80149","shortDescription":null,"title":"Skol 269ml - Unidade","published":null,"volume":"0,00269","volumeUnit":null,"description":null,"subtitle":"Cervejas","components":[]}]},{"id":"8868","title":"Skol 269ml - Unidade","rgb":false,"images":[{"url":"https://courier-images-codechallenge.s3-us-west-2.amazonaws.com/product/8868_205f958d-2e51-48a3-b4d5-a2998765571a.jpg"}],"productVariants":[{"availableDate":"2018-10-31T00:00:00","productVariantId":"8502","price":2.09,"inventoryItemId":"80149","shortDescription":null,"title":"Skol 269ml - Unidade","published":null,"volume":"0,00269","volumeUnit":null,"description":null,"subtitle":"Cervejas","components":[]}]},{"id":"8868","title":"Skol 269ml - Unidade","rgb":false,"images":[{"url":"https://courier-images-codechallenge.s3-us-west-2.amazonaws.com/product/8868_205f958d-2e51-48a3-b4d5-a2998765571a.jpg"}],"productVariants":[{"availableDate":"2018-10-31T00:00:00","productVariantId":"8502","price":2.09,"inventoryItemId":"80149","shortDescription":null,"title":"Skol 269ml - Unidade","published":null,"volume":"0,00269","volumeUnit":null,"description":null,"subtitle":"Cervejas","components":[]}]},{"id":"8868","title":"Skol 269ml - Unidade","rgb":false,"images":[{"url":"https://courier-images-codechallenge.s3-us-west-2.amazonaws.com/product/8868_205f958d-2e51-48a3-b4d5-a2998765571a.jpg"}],"productVariants":[{"availableDate":"2018-10-31T00:00:00","productVariantId":"8502","price":2.09,"inventoryItemId":"80149","shortDescription":null,"title":"Skol 269ml - Unidade","published":null,"volume":"0,00269","volumeUnit":null,"description":null,"subtitle":"Cervejas","components":[]}]},{"id":"8868","title":"Skol 269ml - Unidade","rgb":false,"images":[{"url":"https://courier-images-codechallenge.s3-us-west-2.amazonaws.com/product/8868_205f958d-2e51-48a3-b4d5-a2998765571a.jpg"}],"productVariants":[{"availableDate":"2018-10-31T00:00:00","productVariantId":"8502","price":2.09,"inventoryItemId":"80149","shortDescription":null,"title":"Skol 269ml - Unidade","published":null,"volume":"0,00269","volumeUnit":null,"description":null,"subtitle":"Cervejas","components":[]}]}]')

        const location = { pathname: '/product', state: { data: { products: products } } }

        const wrapper = mount(
        <Product location={location} />
        )
        expect(wrapper.find('.card').exists()).toEqual(true)
    })

    test('Verifica se o valor é adicionado ao carrinho', () => {
        const products = JSON.parse('[{"id":"8868","title":"Skol 269ml - Unidade","rgb":false,"images":[{"url":"https://courier-images-codechallenge.s3-us-west-2.amazonaws.com/product/8868_205f958d-2e51-48a3-b4d5-a2998765571a.jpg"}],"productVariants":[{"availableDate":"2018-10-31T00:00:00","productVariantId":"8502","price":2.09,"inventoryItemId":"80149","shortDescription":null,"title":"Skol 269ml - Unidade","published":null,"volume":"0,00269","volumeUnit":null,"description":null,"subtitle":"Cervejas","components":[]}]},{"id":"8868","title":"Skol 269ml - Unidade","rgb":false,"images":[{"url":"https://courier-images-codechallenge.s3-us-west-2.amazonaws.com/product/8868_205f958d-2e51-48a3-b4d5-a2998765571a.jpg"}],"productVariants":[{"availableDate":"2018-10-31T00:00:00","productVariantId":"8502","price":2.09,"inventoryItemId":"80149","shortDescription":null,"title":"Skol 269ml - Unidade","published":null,"volume":"0,00269","volumeUnit":null,"description":null,"subtitle":"Cervejas","components":[]}]},{"id":"8868","title":"Skol 269ml - Unidade","rgb":false,"images":[{"url":"https://courier-images-codechallenge.s3-us-west-2.amazonaws.com/product/8868_205f958d-2e51-48a3-b4d5-a2998765571a.jpg"}],"productVariants":[{"availableDate":"2018-10-31T00:00:00","productVariantId":"8502","price":2.09,"inventoryItemId":"80149","shortDescription":null,"title":"Skol 269ml - Unidade","published":null,"volume":"0,00269","volumeUnit":null,"description":null,"subtitle":"Cervejas","components":[]}]},{"id":"8868","title":"Skol 269ml - Unidade","rgb":false,"images":[{"url":"https://courier-images-codechallenge.s3-us-west-2.amazonaws.com/product/8868_205f958d-2e51-48a3-b4d5-a2998765571a.jpg"}],"productVariants":[{"availableDate":"2018-10-31T00:00:00","productVariantId":"8502","price":2.09,"inventoryItemId":"80149","shortDescription":null,"title":"Skol 269ml - Unidade","published":null,"volume":"0,00269","volumeUnit":null,"description":null,"subtitle":"Cervejas","components":[]}]},{"id":"8868","title":"Skol 269ml - Unidade","rgb":false,"images":[{"url":"https://courier-images-codechallenge.s3-us-west-2.amazonaws.com/product/8868_205f958d-2e51-48a3-b4d5-a2998765571a.jpg"}],"productVariants":[{"availableDate":"2018-10-31T00:00:00","productVariantId":"8502","price":2.09,"inventoryItemId":"80149","shortDescription":null,"title":"Skol 269ml - Unidade","published":null,"volume":"0,00269","volumeUnit":null,"description":null,"subtitle":"Cervejas","components":[]}]},{"id":"8868","title":"Skol 269ml - Unidade","rgb":false,"images":[{"url":"https://courier-images-codechallenge.s3-us-west-2.amazonaws.com/product/8868_205f958d-2e51-48a3-b4d5-a2998765571a.jpg"}],"productVariants":[{"availableDate":"2018-10-31T00:00:00","productVariantId":"8502","price":2.09,"inventoryItemId":"80149","shortDescription":null,"title":"Skol 269ml - Unidade","published":null,"volume":"0,00269","volumeUnit":null,"description":null,"subtitle":"Cervejas","components":[]}]}]')

        const location = { pathname: '/product', state: { data: { products: products } } }

        const wrapper = mount(
        <Product location={location} />
        )

        wrapper.find('.add').first().simulate('click')
        expect(wrapper.find('.total').text()).toEqual('R$ 2,09')
    })
})
